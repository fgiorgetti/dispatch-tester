0) search and replace the "/home/kgiusti/DISPATCH" text in each of the configuration files.
   Replace this with the path to your installed dispatch test directory.
1) download the version of dispatch you want to test.  
2) Install qpidd and proton packages
3) build dispatch
4) source config.sh in dispatch
5) setup a sasldb in qpidd/sasl2/qpidd.sasldb:
   echo guest | saslpasswd2 -c -p -f qpidd/sasl2/qpidd.sasldb -u QPID guest
6) Create SSL certificates by running the make_certs.sh script in the SSL subdirectory

7) Run qpidd using the configuration in the qpidd subdir:
$ qpidd --config /home/kgiusti/DISPATCH/qpidd/qpidd.conf   --log-enable trace+:Security --log-enable trace+:Protocol 

8) Add a queue to the broker with the prefix "Broker.":
$ qpid-config add queue "Broker.KEN" -b amqps://127.0.0.1 --ssl-certificate ~/DISPATCH/SSL/test_cert_dir/router-client-certificate.pem --ssl-key ~/DISPATCH/SSL/test_cert_dir/router-client-private-key.pem 


9) Fire up two routers (RouterA and RouterB)
$ qdrouterd -c ~/DISPATCH/RouterA/etc/qpid-dispatch/qdrouter.conf
$ qdrouterd -c ~/DISPATCH/RouterB/etc/qpid-dispatch/qdrouter.conf

10) Check RouterA or RouterB using qdstat:
$ qdstat -n -b 127.0.0.1:7777 --ssl-certificate ~/DISPATCH/SSL/test_cert_dir/router-client-certificate.pem --ssl-key ~/DISPATCH/SSL/test_cert_dir/router-client-private-key.pem --ssl-trustfile ~/DISPATCH/SSL/test_cert_dir/ca_cert.pem 

11) create a python virtualenv in the clients subdirectory, install pyngus:

$ virtualenv PY27; source PY27/bin/activate
$ pip install pyngus

12) Run clients to send a receiver from the broker's queue:

$ ./send.py --ca ~/DISPATCH/SSL/test_cert_dir/ca_cert.pem --ssl-cert-file ~/DISPATCH/SSL/test_cert_dir/router-client-certificate.pem --ssl-key-file ~/DISPATCH/SSL/test_cert_dir/router-client-private-key.pem --ssl-key-password password --sasl-config-dir ~/DISPATCH/qpidd/sasl2 --sasl-config-name qpidd -a amqp://127.0.0.1:8888 --target "Broker.KEN" "A Message" 

$ ./recv.py --ca ~/DISPATCH/SSL/test_cert_dir/ca_cert.pem --ssl-cert-file ~/DISPATCH/SSL/test_cert_dir/router-client-certificate.pem --ssl-key-file ~/DISPATCH/SSL/test_cert_dir/router-client-private-key.pem --ssl-key-password password --sasl-config-dir ~/DISPATCH/qpidd/sasl2 --sasl-config-name qpidd -a amqp://127.0.0.1:7777 --source "Broker.KEN"

$ qpid-stat -q -b amqps://127.0.0.1 --ssl-certificate ~/DISPATCH/SSL/test_cert_dir/router-client-certificate.pem --ssl-key ~/DISPATCH/SSL/test_cert_dir/router-client-private-key.pem 

